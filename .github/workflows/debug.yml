name: Showcase problem with windows-2025 image

on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment: whether the final installed artifact should point to staging or production apis, and whether the final artifact should be uploaded to staging or production backoffice'
        required: false
        default: 'staging'  
      flavor:
        description: 'Flavor: which flavor of the artifact should be created by the setup'
        required: true
        default: 'chocolate'
      version:
        description: 'Version: the sem-ver of the artifact. Will also be appended to the setup filename'
        required: true
        default: '1.0.0'

jobs:
  upload-setup-artifact:
    runs-on: windows-2025
    steps:
      - name: Add msbuild to PATH
        uses: microsoft/setup-msbuild@v1.1
      - name: Checkout repository
        uses: actions/checkout@v3.5.2
      - name: Build
        run: dotnet build
      - name: Run - read args from command line and print them
        run: |
               echo "Flavor: ${{ inputs.flavor }}"
               echo "Environment: ${{ inputs.environment }}"
               echo "Version: ${{ inputs.version }}"
               dotnet run --project .\ConsoleApp\ConsoleApp.csproj --flavor "${{ inputs.flavor }}" --environment "${{ inputs.environment }}" --version "${{ inputs.version }}"
        shell: pwsh
